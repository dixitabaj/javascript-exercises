<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <p>Rock Paper Scissors</p>

    <button  class="rock-btn">Rock</button>
    <button  class="paper-btn">Paper</button>
    <button class="scissor-btn">Scissors</button>
    <button onclick="resetScore()">Reset</button>
    <button class="autoplay" onclick="autoplay()">autoplay</button>
    <p class="result"></p>
    <p class="move"></p>
    <p class="score"></p>

    <script>
      
      // Initialize score if not already saved
      let score = JSON.parse(localStorage.getItem('score')) || {
        win: 0,
        loss: 0,
        ties: 0
      };
      let result = '';
      
      showScore();
      

      function pickComputerMove() {
        const random = Math.random();
        if (random < 1 / 3) {
          return 'Rock';
        } else if (random < 2 / 3) {
          return 'Paper';
        } else {
          return 'Scissors';
        }
      }

      function playMove(playerMove) {
        const computerMove = pickComputerMove();
        

        if (playerMove === computerMove) {
          result = 'Tie!';
          score.ties++;
        } else if (
          (playerMove === 'Rock' && computerMove === 'Scissors') ||
          (playerMove === 'Paper' && computerMove === 'Rock') ||
          (playerMove === 'Scissors' && computerMove === 'Paper')
        ) {
          result = 'You won!';
          score.win++;
        } else {
          result = 'You lost!';
          score.loss++;
        }

        localStorage.setItem('score', JSON.stringify(score));

        //alert(`You picked ${playerMove}. Computer picked ${computerMove}. ${result}`);
        document.querySelector('.move').innerHTML=`You picked ${playerMove}. Computer picked ${computerMove}. ${result}`;
        showScore();
        showResult();
      }

      function resetScore() {
        score = { win: 0, loss: 0, ties: 0 };
        localStorage.setItem('score', JSON.stringify(score));
        showScore();
        document.querySelector('.move').innerHTML='';
        document.querySelector('.result').innerHTML='';
        alert("Score has been reset!");
      }
      showResult();
      function showScore() {
        
        document.querySelector('.score').innerHTML =
          `Win: ${score.win}, Lose: ${score.loss}, Tie: ${score.ties}`;
      }
      function showResult() {
        document.querySelector('.result').innerHTML =result;
    }
    let isAutoPlaying=false;
    let intervalId;

    
    function autoplay(){
        if (!isAutoPlaying){
            intervalid=setInterval(() => {
            const playerMove=pickComputerMove();
            playMove(playerMove);
        }, 1000);
        isAutoPlaying=true;
    }
    else{
        clearInterval(intervalId);
        isAutoPlaying=false;
    }
        
    }
    document.querySelector('.rock-btn').addEventListener('click', ()=> {
      playMove('Rock') // we passes this as a function because if we just called the function the function would return undefined to prevent this we are passing this inside a function
    });

    document.querySelector('.paper-btn').addEventListener('click', ()=> {
      playMove('Paper')
    });

    document.querySelector('.scissor-btn').addEventListener('click', ()=> {
      playMove('Scissors')
    });
    
    
    
    document.body.addEventListener('keydown', (event)=> {
     if (event.key === 'r'){
      playMove('Rock');
     }
     else if (event.key === 'p'){
      playMove('Paper');
     }
    else if (event.key === 's'){
      playMove('Scissors');
     }
      
    });

    


    
      
    </script>
  </body>
</html>
